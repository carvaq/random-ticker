ext.getGitVersionName = { appName ->
	String tag = ("git describe --abbrev=0 --tags").execute().text.trim()
	if (tag.contains("$appName/") && tag.contains('.')) {
		def versionName = tag.substring(tag.indexOf('/') + 1, tag.length())
		println "Tag version name $versionName"
		return versionName
	} else {
		throw new Exception("tag has no slashes or a period [${tag}]")
	}
}

ext.parseVersionCode = { versionName ->
	def versionCodeParts = versionName.tokenize('.')
	int decimals = Integer.parseInt(versionCodeParts.get(1))
	String formattedVersionCode = String.format("%s%02d%02d", versionCodeParts.get(0), decimals, runner)
	def versionCode = Integer.parseInt(formattedVersionCode)
	println "Version name: ${versionName}  Version code: ${versionCode}"
	return versionCode
}
